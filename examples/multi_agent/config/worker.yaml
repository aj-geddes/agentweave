# AgentWeave Configuration - Worker Agent

agent:
  name: "worker-1"  # Change to worker-2, worker-3, etc. for additional workers
  trust_domain: "hvs.solutions"
  description: "Worker agent that processes individual items"
  capabilities:
    - name: "process_item"
      description: "Process a single item"
      input_modes: ["application/json"]
      output_modes: ["application/json"]
    - name: "ping"
      description: "Health check endpoint"
      input_modes: ["application/json"]
      output_modes: ["application/json"]

identity:
  provider: "spiffe"
  spiffe_endpoint: "unix:///run/spire/sockets/agent.sock"
  allowed_trust_domains:
    - "hvs.solutions"

authorization:
  provider: "opa"
  opa_endpoint: "http://opa:8181"
  policy_path: "hvs/authz"
  default_action: "deny"
  audit:
    enabled: true
    destination: "stdout"

transport:
  tls_min_version: "1.3"
  peer_verification: "strict"
  connection_pool:
    max_connections: 50
    idle_timeout_seconds: 60
  circuit_breaker:
    failure_threshold: 5
    recovery_timeout_seconds: 30
  retry:
    max_attempts: 3
    backoff_base_seconds: 1.0
    backoff_max_seconds: 30.0

server:
  host: "0.0.0.0"
  port: 8443
  protocol: "a2a"

observability:
  metrics:
    enabled: true
    port: 9090
  tracing:
    enabled: true
    exporter: "otlp"
    endpoint: "http://otel-collector:4317"
  logging:
    level: "INFO"
    format: "json"
